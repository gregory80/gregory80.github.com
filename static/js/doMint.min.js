/*
 MIT Licsense

*/
var doMint=function(h){function g(e,d){var b=d,a,c=e&&l(e)&&e.split(".")||[];1<c.length?(c.forEach(function(c){a=c;b=b[c]}),a&&(this[a]=b)):e in b&&(this[e]=b[e]);return this}function f(e){return e&&"function"===typeof e}function j(e){return!!("object"===typeof e&&e.__proto__===Array.prototype)}function l(e){return!!(e&&"function"===typeof e.split)}function w(e,d,b){return{_idx:0,name:e||"__doMint__",data:d||null,run_once:!1,method:f(d)?d:b||function(){},scope:this}}function x(e){var d=e;this.__defineGetter__("__name__",
function(){return d});this.__defineSetter__("__name__",function(e){d=f(e)?e(inst_data):e});return this}var q={save:function(e){var d=JSON.stringify(this);this.config&&this.config.preprocessors&&f(this.config.preprocessors.save)&&(d=this.config.preprocessors.save.call(this,e||this.__name__,d));h.localStorage.setItem(e||this.__name__,d);this.on("save");return this},remove:function(e){h.localStorage.removeItem(e||this.__name__);this.on("remove");return this},load:function(e){var d=h.localStorage.getItem(e||
this.__name__);this.config&&this.config.preprocessors&&f(this.config.preprocessors.load)&&(d=this.config.preprocessors.load.call(this,e||this.__name__,d));try{this.update(JSON.parse(d)),this.on("load")}catch(b){this.on("error",b)}return this}},k={mkeys:function(e,d){var b=e.length,a;for(this.config&&this.config.preprocessors&&f(this.config.preprocessors.mkeys)&&(d=this.config.preprocessors.mkeys.call(this,e,d));b--;)a=e[b],g.call(this,a,d);return this},pkeys:function(e,d){for(var b=e.length,a;b--;)a=
e[b],a in d&&(f(d[a])?this.__defineGetter__(a,function(a,e){return function(){return a.call(e)}}(d[a],this)):this.__defineGetter__(a,function(a){return function(){return a}}(d[a])));return this},readonly:function(e,d,b){for(var a in e)a&&e.hasOwnProperty(a)&&this.__defineGetter__(a,function(a,e){return function(){return e.call(a,d,b)}}(this,e[a]));return this},methods:function(e){for(var d in e)this[d]=function(b,a){return function(){return e[b].apply(a,arguments)}}(d,this);return this},derived_methods:function(e,
d,b){for(var a in e)f(e[a])&&(this[a]=e[a].call(this,d,b));return this}},m=0;return function d(b){function a(i){if(!(this instanceof a))throw Error("INVALID_INNVOCATION");n+=1;this.__EVTS=[];i=i||{};i instanceof a&&(i=i.toJSON());x.call(this,i.__name__||this.factoryType||c.factoryType);c&&c.autoload&&this.load();c&&c.autowatch&&(h.addEventListener("storage",function(a){return function(c){for(var i=a.__EVTS,b=i.length,d,o;b--;)if(d=i[b],"windowStorage"===d.name&&(o={},c.newValue)){try{o=JSON.parse(c.newValue)||
{}}catch(f){}d.method.call(d.scope,{event:c},o,d.data);d.run_once&&i.splice(b,1)}a.on.call(a,"windowStorage",{event:c})}}(this),!1),this.on("windowStorage",{},function(){}));for(var b in r)this.on(b,{},r[b]);this._mintify(c.mkeys,c.pkeys,s,t,u,c,i);this.init(c,i,arguments);return this}var c;c=b&&b.__configureMint__&&b.config?b.config:b&&b.fn&&"config"in b.fn?b.fn.config:b&&(j(b)||l(b))?{mkeys:b}:b||{};m+=1;var g=Math.round(1E4*Math.random()+Date.now())+m,b="saveable"in c?c.saveable:!0,t=c.derived_methods||
{},u=c.read_only||{},r=c.events||[],s=c.methods||{},g=c.factoryType||d.enums.PREFIX+g,n=0,p=c.DELIMITER||d.enums.DELIMITER||" ";"mkeys"in c||(c.mkeys=[]);"pkeys"in c||(c.pkeys=[]);"skeys"in c||(c.skeys=null);"preprocessors"in c||(c.preprocessors={});l(c.mkeys)&&(c.mkeys=c.mkeys.split(p));l(c.pkeys)&&(c.pkeys=c.pkeys.split(p));l(c.skeys)&&(c.skeys=c.skeys.split(p));a.fn=a.prototype;a.prototype.constructor=a;a.fn.__configureMint__=c;a.fn.global_counter=m;a.fn.factoryType=g;a.fn.__defineGetter__("config",
function(){return this.__configureMint__});a.fn.mintify=function(i){return a.fn._mintify.call(this,c.mkeys,c.pkeys,s,t,u,c,i||{})};a.fn.getData=function(){return this.toJSON.apply(this,arguments)};a.fn.cmp=function(a){var c=this.getData(),a=a&&a.getData()||null,b=!1,d=this.config&&this.config.mkeys||[],f=0,h=d.length;a:for(;f<h;f++)if(b=d[f],b in c&&!(b in a)){b=!1;break a}else if(b in c&&b in a&&c[b]!==a[b]){b=!1;break a}else b=!0;return b};a.fn.toJSON=function(a){var b=c.skeys||c.mkeys,d={};a&&
j(a)&&(b=a);for(var a=0,f;f=b[a];a++)d[f]=this[f];return d};a.fn.__defineGetter__("_inst_counter",function(){return n});a.fn.minter=k;if(b)for(var v in q)a.fn[v]=q[v];a.fn.init=function(a,b){this.on("init",b)};a.fn._mintify=function(a,b,c,d,f,h,g){g=g||{};k.mkeys.call(this,a||[],g);k.pkeys.call(this,b||[],g);k.methods.call(this,c,g);k.derived_methods.call(this,d,h,g);k.readonly.call(this,f,h,g);return this};a.fn.update=function(a){k.mkeys.call(this,c.mkeys,a||{});this.on("update",this.toJSON());return this};
a.fn.purge=function(){var a=this.getData(),b;for(b in a)b&&a.hasOwnProperty(b)&&b in this&&delete this[b];this.on("purge");return this};a.fn.on=function(a,b,c){1<=arguments.length&&!f(b)?this.__EVTS.forEach(function(c){if(c.name===(a||"__doMint__"))c.method.call(c.scope,b||c.data)}):this.__EVTS.push(w.call(this,a,f(b)?{}:b,c||b));return this};a.fn.off=function(a,b){for(var c,d=this.__EVTS.length;d--;)c=this.__EVTS[d],a===c.name&&b===c.method?this.__EVTS.splice(d,1):!f(b)&&a===c.name&&this.__EVTS.splice(d,
1);return this};c&&c.singleton&&(a.instance=function(){var b=Array.prototype.slice.call(arguments,0)||[];a.fn._instance?0<b.length&&a.fn._instance.update.apply(a.fn._instance,b):a.fn._instance=new a(b[0]||{});return a.fn._instance});return a}}(this);doMint.getAllStored=function(){for(var h=[],g,f=0,j=window.localStorage.length;f<j;f++)g=window.localStorage.key(f),h.push(g);return h};doMint.quick=function(h,g,f){return new (doMint.partial(h,g,f))};
doMint.partial=function(h,g,f){var j=h;"function"!==typeof h&&(j=function(){});j.prototype=new (doMint(g||{}))(f);return j};doMint.version="0.7.1";doMint.enums={PREFIX:"DoMint_",DELIMITER:" "};
